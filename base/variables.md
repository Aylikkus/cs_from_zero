# Переменные

## Что такое переменная

Простыми словами переменная - это коробка в которую мы кладём данные. Коробки бывают разные, могут быть коробки которые предзназначены для хранения сугубо числа, коллекции цифр, строк, буквы или вообще всего-чего угодно, даже адрес на другую коробку если мы того пожелаем. Коробка также может быть изменяемой или неизменяемой или вообще быть пустой.

В отличие от коробки, переменная это область в памяти компьютера, переменная имеет адрес и значение. Также очень важная особенность это то, что у переменной есть тип, который определяет что хранится в данной переменной.

## Типизация

Перед тем как углубиться в тему типов переменных стоит ознакомиться с понятием типизации у языков программирования. Существует статическая и динамическая типизация. Основное отличие заключается в том, что в статической тип переменной присваивается во время компиляции, а динамической во время работы программы (или рантайма).

Что такое компиляция? Это процесс преобразования исходного кода (или любого текста вообще) в текст на другом языке программирования или машинный, с которым компьютер может уже работать напрямую. Можно сказать, что когда мы переводим текст с одного языка на другой (например с русского на английский), мы его определённым образом компилируем.

Тот факт, что тип присваивается во время компиляции означает то, что программист должен позаботиться о том, чтобы предоставить тип до того, как он её скомпилирует (так как компилятор будет выдавать ошибку). При динамической типизации уточнение типа необязательно, программа решит сама, какой тип должен быть у данной переменной.

## Объявление переменных

Процесс бъвяления переменной может отличаться в зависимости от типизации языка программирования. Так как C# является статически-типизированным языком программирования, то тип переменной нужно всегда указывать, иначе программа не заработает. В прошлой теме мы рассматривали различные числовые виды переменных, помимо них есть также _булевские_, _символьные_ и _строковые_ типы переменных. Для объвления переменной мы записываем тип переменной, затем её имя и обязательно точку с запятой, например:

```csharp
int number;
```

Данная переменная не хранит в себе какое-либо значение, если мы попытаемся её использовать, то получим ошибку во время компиляции (CS0165). Для того чтобы присвоить значение переменной мы должны написать знак равно и само значение, причём делаться это может как на одной строчке при объявлении, так и в любом другом месте программы (важное условие соблюдать видимость и последовательность).

```csharp
int number = 5; // Объявили переменную со значением 5
number = 3;     // Изменили значение переменной на 3
```

Мы можем задать константную перемеменную, это такая переменная, которая не может изменить своё значение во время работы программы, для того чтобы пометить переменную константной мы должны подписать ключевое слово `const`, например:

```csharp
const int five = 5;
const int red = 0xff0000;
const decimal pi = 3.141592653;
```

Использование константных переменных может иметь некоторое преимущество при работе программы (так как такие переменные помещаются в отдельную область памяти), но это больше имеет практический характер: таким образом можно сказать не только себе, но и остальным программистам, что значение данной переменной изменяться не должно, иначе это будет являться ошибкой.

---

Также в C# имеется отдельный тип, предназначенный для динамической типизации, называемый `dynamic`. Не путать данный тип с типом `object`, который также может хранить в себе любые значения. Также `dynamic` достаточно медленный и не рекомендуется для использования, за исключением случаев когда требуется работать с языками имеющими динамическую типизацию (такими как javascript или python). Так как он обходит проверку на тип, то может вызывать ошибки во время работы программы, так как непонятно что он вообще в себе хранит, помимо этого каждая операция с `dynamic` возвращает `dynamic`.

## Почему не `object`?

Данный тип является максимально общим, и из-за этого с ним мало что можно сделать, для того чтобы проводить какие-либо операции нам придётся его преобразовывать (например мы не можем сложить объект и число, или объект и объект):

```csharp
object obj = 1;
obj = obj + 1; // Ошибка, object не поддерживает операцию сложения
```

## Пару слов о `var`

C# позволяет не указывать конкретный тип переменной, а написать просто `var`. `var` не является типом данных, это просто синтаксический сахар, который нужен больше для удобства разработчика не морочиться указывать тип, когда и так понятно каким он является, он позволяет избавиться от лишней тавтологии и сделать код немного, но чище. Под капотом в `var` просто подставляется то, что находится от него с правой стороны. Тоесть, мы не можем объявить пустую с перемеменную с типом `var`, так как он не является таковым. Рассмотрим примеры:

```csharp
var varialbe; // Ошибка, переменной нужно присвоить значение
```

```csharp
var variable = 6;
var variable1 = "21th of January";
var variable2 = false;

/* Как это видит компилятор
int variable = 6;
string variable1 = "21th of January";
bool variable2 = false;
*/

Console.WriteLine(variable.GetType());  // Вывод: System.Int32
Console.WriteLine(variable1.GetType()); // Вывод: System.String
Console.WriteLine(variable2.GetType()); // Вывод: System.Boolean
```

Как можно заметить при использовании `var` код у нас становится чуточку, но красивее. `var` не умный, и подставляет только значения по-умолчанию, например нам мог бы быть нужен не `int`, `byte` в первой переменной, тогда мы должны самостоятельно об этом позаботиться.

## Преобразования типов

Раз уж мы затронули данную тему, то поговорим о преобразовании типов (или тайп-касте). Преобразование типов у нас может быть явным, или неявным. В явном мы должны точно указать в какой тип мы хотим перевести, при этом при явном преобразовании мы можем получить нежелательное поведение, рассмотрим пример:

```csharp
int i = -1;
byte b = (byte)i;

Console.WriteLine(b);
    // Вывод: 255
```

Здесь мы явно преобразуем 32 битную переменную со знаком в 8 битную без знака, так как мы не можем записать -1 в `byte`, то можно сказать, что мы его обнуляем и считаем в обратном порядке и получаем 255.

Рассмотрим пример с неявным преобразованием:

```csharp
int i = 45443;
long l = i;

Console.WriteLine(l); // Вывод: 45443
```

Для того чтобы преобразовать в обратном порядке (из меньшего в большего), нам не нужно ничего менять, просто записываем как оно есть.

## Строковые, символьные и булевские переменные

Помимо чисел в C# можно представлять строки, символьные и булевские(логические) значения. Для строк используется тип `string`, для символов `char`, для булевых значений `bool`. Пример:

```csharp
string greeting = "Hello, world!";
char a = 'a';
bool isSummer = true;
```

Каждый символ в строке закодирован в формате UTF-16. При этом первые 255 символов идут также, как в таблице ASCII. Это очень удобно, так как мы можем работать с символами как с обычными цифрами. Например прописные латинские буквы в данной таблице идут в диапазоне от 65 до 90. Мы можем проверить это таким образом:

```csharp
int A = 'A';
int Z = 'Z';

Console.WriteLine(A); // Вывод: 65
Console.WriteLine(Z); // Вывод: 90
```

На полную таблицу ASCII можно посмотреть [тут](https://external-content.duckduckgo.com/iu/?u=https%3A%2F%2Fupload.wikimedia.org%2Fwikipedia%2Fcommons%2Fthumb%2Fd%2Fdd%2FASCII-Table.svg%2F1261px-ASCII-Table.svg.png&f=1&nofb=1).

## Видимость и последовательность переменных

Программа на C# может быть поделена на огромное количество областей, при этом то, что там родилось, там и остаётся. В данном контексте мы работали в одной зоне видимости, из которой нам доступно всё, только нужно соблюдать последовательность. Мы не можем использовать переменную, которую мы объявили через несколько строчек кода, т.е. взять из "будущего". Пример:

```csharp
int b = a; // Ошибка, нельзя использовать переменную до того
int a = 5; // как мы её объявили
```

Как мы можем создать зону видимости? Достаточно просто написать фигурные скобки, и у нас образуется новая зона. При этом если мы там объявим переменную, то она там же и останется, т.е. станет недоступна для внешнего мира. Пример:

```csharp
int b = 0;

{
	int a = 5;
}

b = a + 1; // Ошибка, переменная не существует в текущем контексте
```

Таким образом можно сразу запомнить, что когда мы видим фигурные скобки, то там сразу же образуется локальная зона видимости, зону видимости можно обойти, но это больше относится к классам и структурам, мы не будем рассматривать это сейчас.
